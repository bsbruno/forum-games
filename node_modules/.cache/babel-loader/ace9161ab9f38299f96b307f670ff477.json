{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jogos/Desktop/forum-game/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/jogos/Desktop/forum-game/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/jogos/Desktop/forum-game/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/jogos/Desktop/forum-game/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable @typescript-eslint/ban-types */ /* eslint-disable @typescript-eslint/explicit-module-boundary-types */import React,{useCallback,useRef,useState}from\"react\";import Logo from\"../../components/Logo\";import Button from\"../../components/Button\";import Input from\"../../components/Input\";import{FiMail}from\"react-icons/fi\";import{Form}from\"@unform/web\";import*as S from\"./stlyed\";import*as Yup from\"yup\";import getValidationErros from\"../../utils/getValidationErros\";import api from\"../../services/api\";import Loading from\"../../components/Loading\";import Toast from\"../../components/Toast\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ForgotPassword=function ForgotPassword(){var formRef=useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isError=_useState4[0],setIsError=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),loadingToast=_useState6[0],setLoadingToat=_useState6[1];var handleSubmit=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var _formRef$current,schema,_formRef$current2,errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(false);(_formRef$current=formRef.current)===null||_formRef$current===void 0?void 0:_formRef$current.setErrors({});schema=Yup.object().shape({email:Yup.string().required(\"Email Obrigatorio\").email(\"Digite um E-mail valido\")});_context.next=6;return schema.validate(data,{abortEarly:false});case 6:setLoadingToat(false);_context.next=9;return api.post(\"/password/forgot\",_objectSpread({},data));case 9:setLoadingToat(true);setIsError(false);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);if(_context.t0 instanceof Yup.ValidationError){errors=getValidationErros(_context.t0);(_formRef$current2=formRef.current)===null||_formRef$current2===void 0?void 0:_formRef$current2.setErrors(errors);}setIsError(true);case 17:_context.prev=17;setLoading(false);return _context.finish(17);case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,13,17,20]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);return/*#__PURE__*/_jsxs(S.Wrapper,{children:[/*#__PURE__*/_jsx(S.Background,{children:/*#__PURE__*/_jsxs(S.BackgroundText,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Lorem \"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the \",/*#__PURE__*/_jsx(\"strong\",{children:\"standard dummy text ever\"}),\" since the 1500s, when an unknown printer took a galley of type and scrambled\"]})]})}),/*#__PURE__*/_jsxs(S.Content,{children:[loadingToast===false&&/*#__PURE__*/_jsx(Toast,{message:\" Enviamos um email para voce\"}),isError===true&&/*#__PURE__*/_jsx(Toast,{message:\" Error interno tente enviar novamente\"}),/*#__PURE__*/_jsx(Logo,{size:\"large\",hiddenText:true}),/*#__PURE__*/_jsxs(Form,{ref:formRef,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recupera\\xE7\\xE3o de Senha \"}),/*#__PURE__*/_jsx(Input,{name:\"email\",icon:FiMail,type:\"email\",placeholder:\"E-mail\"}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(Button,{color:\"secondary\",type:\"submit\",children:\"Recupera Senha\"})]})]})]});};export default ForgotPassword;","map":{"version":3,"sources":["C:/Users/jogos/Desktop/forum-game/frontend/src/pages/ForgotPassword/index.tsx"],"names":["React","useCallback","useRef","useState","Logo","Button","Input","FiMail","Form","S","Yup","getValidationErros","api","Loading","Toast","ForgotPassword","formRef","loading","setLoading","isError","setIsError","loadingToast","setLoadingToat","handleSubmit","data","current","setErrors","schema","object","shape","email","string","required","validate","abortEarly","post","ValidationError","errors"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/ban-types */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport React, { useCallback, useRef, useState } from \"react\";\nimport Logo from \"../../components/Logo\";\nimport { FormHandles } from \"@unform/core\";\nimport Button from \"../../components/Button\";\nimport Input from \"../../components/Input\";\nimport { FiMail } from \"react-icons/fi\";\nimport { Form } from \"@unform/web\";\nimport * as S from \"./stlyed\";\nimport * as Yup from \"yup\";\nimport getValidationErros from \"../../utils/getValidationErros\";\nimport api from \"../../services/api\";\nimport Loading from \"../../components/Loading\";\nimport Toast from \"../../components/Toast\";\n\ntype SignUpFormData = {\n  email: string;\n};\n\nconst ForgotPassword = () => {\n  const formRef = useRef<FormHandles>(null);\n  const [loading, setLoading] = useState(null);\n  const [isError, setIsError] = useState(false);\n  const [loadingToast, setLoadingToat] = useState(null);\n\n  const handleSubmit = useCallback(async (data: SignUpFormData) => {\n    try {\n      setLoading(false);\n\n      formRef.current?.setErrors({});\n      const schema = Yup.object().shape({\n        email: Yup.string()\n          .required(\"Email Obrigatorio\")\n          .email(\"Digite um E-mail valido\"),\n      });\n      await schema.validate(data, {\n        abortEarly: false,\n      });\n      setLoadingToat(false);\n      await api.post(\"/password/forgot\", { ...data });\n      setLoadingToat(true);\n      setIsError(false);\n    } catch (err) {\n      if (err instanceof Yup.ValidationError) {\n        const errors = getValidationErros(err);\n        formRef.current?.setErrors(errors);\n      }\n      setIsError(true);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  return (\n    <S.Wrapper>\n      <S.Background>\n        <S.BackgroundText>\n          <h1>Lorem </h1>\n          <p>\n            is simply dummy text of the printing and typesetting industry. Lorem\n            Ipsum has been the <strong>standard dummy text ever</strong> since\n            the 1500s, when an unknown printer took a galley of type and\n            scrambled\n          </p>\n        </S.BackgroundText>\n      </S.Background>\n      <S.Content>\n        {loadingToast === false && (\n          <Toast message=\" Enviamos um email para voce\" />\n        )}\n        {isError === true && (\n          <Toast message=\" Error interno tente enviar novamente\" />\n        )}\n\n        <Logo size=\"large\" hiddenText={true} />\n        <Form ref={formRef} onSubmit={handleSubmit}>\n          <h2>Recuperação de Senha </h2>\n\n          <Input name=\"email\" icon={FiMail} type=\"email\" placeholder=\"E-mail\" />\n\n          {loading ? (\n            <Loading />\n          ) : (\n            <Button color=\"secondary\" type=\"submit\">\n              Recupera Senha\n            </Button>\n          )}\n        </Form>\n      </S.Content>\n    </S.Wrapper>\n  );\n};\n\nexport default ForgotPassword;\n"]},"metadata":{},"sourceType":"module"}