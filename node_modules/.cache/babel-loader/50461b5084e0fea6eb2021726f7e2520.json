{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jogos/Desktop/forum-game/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/jogos/Desktop/forum-game/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/jogos/Desktop/forum-game/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/jogos/Desktop/forum-game/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable @typescript-eslint/ban-types */ /* eslint-disable @typescript-eslint/explicit-module-boundary-types */import React,{useCallback,useRef,useState}from\"react\";import Logo from\"../../components/Logo\";import Button from\"../../components/Button\";import{Link,useHistory}from\"react-router-dom\";import Input from\"../../components/Input\";import{FiMail,FiLock}from\"react-icons/fi\";import{Form}from\"@unform/web\";import*as S from\"./stlyed\";import*as Yup from\"yup\";import getValidationErros from\"../../utils/getValidationErros\";import{useAuth}from\"../../hooks/AuthContext\";import Toast from\"../../components/Toast\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignIn=function SignIn(){var formRef=useRef(null);var _useAuth=useAuth(),signIn=_useAuth.signIn;var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isError=_useState2[0],setIsError=_useState2[1];console.log(formRef.current);var handleSubmit=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var _formRef$current,schema,_formRef$current2,errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;(_formRef$current=formRef.current)===null||_formRef$current===void 0?void 0:_formRef$current.setErrors({});schema=Yup.object().shape({email:Yup.string().required(\"Email Obrigatorio\").email(\"Digite um E-mail valido\"),password:Yup.string().min(6,\"No minimo 6 digitos \")});_context.next=5;return schema.validate(data,{abortEarly:false});case 5:setIsError(false);_context.next=8;return signIn(_objectSpread({},data));case 8:history.push(\"/home\");_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);if(_context.t0 instanceof Yup.ValidationError){errors=getValidationErros(_context.t0);(_formRef$current2=formRef.current)===null||_formRef$current2===void 0?void 0:_formRef$current2.setErrors(errors);}setIsError(true);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[signIn,history]);return/*#__PURE__*/_jsxs(S.Wrapper,{children:[/*#__PURE__*/_jsx(S.Background,{children:/*#__PURE__*/_jsxs(S.BackgroundText,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"GAME FORUM\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Uma plataforma feita por um game para games Ipsum has been the\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"standard dummy text ever\"}),\" since the 1500s, when an unknown printer took a galley of type and scrambled\"]})]})}),/*#__PURE__*/_jsxs(S.Content,{children:[isError&&/*#__PURE__*/_jsx(Toast,{message:\"Senha/Login errado\"}),/*#__PURE__*/_jsx(Logo,{size:\"large\",hiddenText:true}),/*#__PURE__*/_jsxs(Form,{ref:formRef,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login \"}),/*#__PURE__*/_jsx(Input,{name:\"email\",icon:FiMail,type:\"email\",placeholder:\"E-mail\"}),/*#__PURE__*/_jsx(Input,{name:\"password\",icon:FiLock,type:\"password\",placeholder:\"Senha\"}),/*#__PURE__*/_jsx(Button,{color:\"secondary\",type:\"submit\",children:\"Logar\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:\"1.4rem\",alignSelf:\"flex-end\"},children:[\"Esqueceu sua senha?\",/*#__PURE__*/_jsx(Link,{style:{opacity:0.7,marginLeft:\"0.5rem\"},to:\"/forgot-password\",children:\"Redefinir Senha\"})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"N\\xE3o tem uma conta ? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Criar\"})]})]})]})]});};export default SignIn;","map":{"version":3,"sources":["C:/Users/jogos/Desktop/forum-game/frontend/src/pages/SignIn/index.tsx"],"names":["React","useCallback","useRef","useState","Logo","Button","Link","useHistory","Input","FiMail","FiLock","Form","S","Yup","getValidationErros","useAuth","Toast","SignIn","formRef","signIn","history","isError","setIsError","console","log","current","handleSubmit","data","setErrors","schema","object","shape","email","string","required","password","min","validate","abortEarly","push","ValidationError","errors","fontSize","alignSelf","opacity","marginLeft"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/ban-types */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport React, { useCallback, useRef, useState } from \"react\";\nimport Logo from \"../../components/Logo\";\nimport { FormHandles } from \"@unform/core\";\nimport Button from \"../../components/Button\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Input from \"../../components/Input\";\nimport { FiMail, FiLock } from \"react-icons/fi\";\nimport { Form } from \"@unform/web\";\nimport * as S from \"./stlyed\";\nimport * as Yup from \"yup\";\nimport getValidationErros from \"../../utils/getValidationErros\";\n\nimport { useAuth } from \"../../hooks/AuthContext\";\nimport Toast from \"../../components/Toast\";\n\ntype SignUpFormData = {\n  email: string;\n  password: string;\n};\n\nconst SignIn = () => {\n  const formRef = useRef<FormHandles>(null);\n  const { signIn } = useAuth();\n  const history = useHistory();\n  const [isError, setIsError] = useState(false);\n\n  console.log(formRef.current);\n  const handleSubmit = useCallback(\n    async (data: SignUpFormData) => {\n      try {\n        formRef.current?.setErrors({});\n        const schema = Yup.object().shape({\n          email: Yup.string()\n            .required(\"Email Obrigatorio\")\n            .email(\"Digite um E-mail valido\"),\n          password: Yup.string().min(6, \"No minimo 6 digitos \"),\n        });\n        await schema.validate(data, {\n          abortEarly: false,\n        });\n        setIsError(false);\n\n        await signIn({ ...data });\n        history.push(\"/home\");\n      } catch (err) {\n        if (err instanceof Yup.ValidationError) {\n          const errors = getValidationErros(err);\n          formRef.current?.setErrors(errors);\n        }\n        setIsError(true);\n      }\n    },\n    [signIn, history]\n  );\n\n  return (\n    <S.Wrapper>\n      <S.Background>\n        <S.BackgroundText>\n          <h1>GAME FORUM</h1>\n          <p>\n            Uma plataforma feita por um game para games Ipsum has been the{\" \"}\n            <strong>standard dummy text ever</strong> since the 1500s, when an\n            unknown printer took a galley of type and scrambled\n          </p>\n        </S.BackgroundText>\n      </S.Background>\n      <S.Content>\n        {isError && <Toast message=\"Senha/Login errado\" />}\n        <Logo size=\"large\" hiddenText={true} />\n        <Form ref={formRef} onSubmit={handleSubmit}>\n          <h2>Login </h2>\n\n          <Input name=\"email\" icon={FiMail} type=\"email\" placeholder=\"E-mail\" />\n\n          <Input\n            name=\"password\"\n            icon={FiLock}\n            type=\"password\"\n            placeholder=\"Senha\"\n          />\n\n          <Button color=\"secondary\" type=\"submit\">\n            Logar\n          </Button>\n          <span\n            style={{\n              fontSize: \"1.4rem\",\n              alignSelf: \"flex-end\",\n            }}\n          >\n            Esqueceu sua senha?\n            <Link\n              style={{ opacity: 0.7, marginLeft: \"0.5rem\" }}\n              to=\"/forgot-password\"\n            >\n              Redefinir Senha\n            </Link>\n          </span>\n          <span>\n            Não tem uma conta ? <Link to=\"/signup\">Criar</Link>\n          </span>\n        </Form>\n      </S.Content>\n    </S.Wrapper>\n  );\n};\n\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}